window.APPCONF={BAAS_APP_CODE:"1234567890",URLS:{SIGNUP:"http://baasbox-cog4.rhcloud.com/user",LOGIN:"http://baasbox-cog4.rhcloud.com/login"}},window.Paperapp={Models:{},models:{},Collections:{},collections:{},Views:{},views:{},init:function(){$.ui.backButtonText="Back",window.setTimeout(function(){$.ui.launch()},100)}},$.ui.ready(function(){console.log("app framework launched"),$.ui.removeFooterMenu(),Paperapp.views.appView=new Paperapp.Views.AppView}),function(){var a,b,c,d;a=_.Deferred(),b=_.Deferred(),window.DocumentTouch&&document instanceof DocumentTouch||"ontouchstart"in window||(c=document.createElement("script"),c.src="bower_components/intel-appframework/plugins/af.desktopBrowsers.js",d=$("head").append(c),$.os.ios=!0,$.os.desktop=!0,b.resolve()),$.ui.autoLaunch=!1,document.addEventListener("deviceready",b.resolve,!0),document.addEventListener("DOMContentLoaded",a.resolve,!1),_.when([b,a]).then(function(){window.Paperapp.init()})}(),Paperapp.Models=Paperapp.Models||{},function(){Paperapp.Models.UserModel=Backbone.Model.extend({initialize:function(){this.session},defaults:{},validate:function(){},parse:function(a){return a},login:function(a){var b=this;$.ajax({url:APPCONF.URLS.LOGIN,type:"POST",dataType:"JSON",beforeSend:function(b){b.setRequestHeader("X-BAASBOX-APPCODE",APPCONF.BAAS_APP_CODE),b.setRequestHeader("Authentication","Basic "+Base64.encode(a.username+":"+a.password))},data:$.extend(a,{appcode:APPCONF.BAAS_APP_CODE}),success:function(a){a=JSON.parse(a),b.session=a.data["X-BB-SESSION"],alert("You have succesfully logged in"),$.ui.goBack()},error:function(){alert("Login error")}})},signup:function(a){$.ajax({url:APPCONF.URLS.SIGNUP,type:"POST",dataType:"JSON",contentType:"application/json",beforeSend:function(b){b.setRequestHeader("X-BAASBOX-APPCODE",APPCONF.BAAS_APP_CODE),b.setRequestHeader("Authentication","Basic "+Base64.encode(a.username+":"+a.password))},data:JSON.stringify($.extend(a,{appcode:APPCONF.BAAS_APP_CODE})),success:function(a){console.log(a),alert("signup success"),$.ui.goBack()},error:function(a){var b;alert(a.responseText.length?"signup error: "+a.responseText:"signup error : response is empty"),console.log(b)}})}})}(),Paperapp.Views=Paperapp.Views||{},function(){Paperapp.Views.AppView=Backbone.View.extend({el:"body",events:{"submit #signup-form":"signup","submit #login-form":"login"},initialize:function(){_.bindAll(this,"signup","login"),Paperapp.models.userModel=new Paperapp.Models.UserModel},signup:function(a){a.preventDefault();var b=$(a.currentTarget);Paperapp.models.userModel.signup(this.serializeFormToArray(b))},login:function(a){a.preventDefault();var b=$(a.currentTarget);Paperapp.models.userModel.login(this.serializeFormToArray(b))},serializeFormToArray:function(a){var b={};return a.find("input[name], textarea[name]").each(function(a,c){var d=$(c);b[d.attr("name")]=d.val()}),b}})}();